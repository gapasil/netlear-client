{"ast":null,"code":"import _createForOfIteratorHelper from\"/var/www/netlear/html/clientNetlear/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _objectSpread from\"/var/www/netlear/html/clientNetlear/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/var/www/netlear/html/clientNetlear/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/var/www/netlear/html/clientNetlear/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/var/www/netlear/html/clientNetlear/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import'./EventDeployPanel.scss';import{Progress,Upload}from'antd';import{CheckCircleFilled,ClockCircleFilled}from'@ant-design/icons';import{useSelector,useDispatch}from'react-redux';import{setMaunContentVebinarsSettings}from'../../redux/actions/eventRedactor/eventRedactor';import{setVideosFromRedactor,setVideoUploadingProcess,setVideoURI,setVideoTranscodingStatus,setVideoURL,fetchPostEventData,fetchPostEventPictures}from'../../redux/actions/UploadingCourse/UploadingCourse';import{testUploadVimeoVids,testCheckTranscodingVimeoVids,testGetVimeoVidsURL}from'../../utils/testVimeo';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function EventDeployPanel(){var eventData=useSelector(function(state){return state.eventRedactor;});var vebinarsData=useSelector(function(state){return state.eventRedactor.mainContent.data.vebinars;});var uploadingData=useSelector(function(state){return state.UploadingCourse;});var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),videoURLFlag=_React$useState2[0],setVideoURLFlag=_React$useState2[1];// const [checkTranscodingFlag, setCheckTranscodingFlag] = React.useState(true);\nvar dispatch=useDispatch();var dispatchUploadingVideoProcess=function dispatchUploadingVideoProcess(percent,index){dispatch(setVideoUploadingProcess(percent,index));};// const dispatchVideoURI = (uri, index) => {\n//   dispatch(setVideoURI(uri, index));\n// };\n// const dispatchVideoTranscodingStatus = (status, index) => {\n//   dispatch(setVideoTranscodingStatus(status, index));\n// };\n// const dispatchVideoURL = (url, index) => {\n//   dispatch(setVideoURL(url, index));\n// };\n// React.useEffect(() => {\n//   testOnLoad();\n// }, []);\n// React.useEffect(() => {\n//   uploadingData.videoList.forEach((el, i) => {\n//     if (el.videoURI && !el.videoURL && videoURLFlag) {\n//       setVideoURLFlag(false);\n//       testGetVimeoVidsURL(el.videoURI, dispatchVideoURL, i);\n//     }\n//   });\n// }, [uploadingData.videoList, videoURLFlag]);\n// React.useEffect(() => {\n//   if (uploadingData.videoList.find((el) => !el.videoURL)) {\n//     setTimeout(() => {\n//       setVideoURLFlag(true);\n//     }, 3000);\n//   } else if (uploadingData.videoList.every((el) => el.videoURL)) {\n//     uploadFullCourseData();\n//   }\n// }, [!videoURLFlag]);\n// React.useEffect(() => {\n//   if (uploadingData.postedCourseId) {\n//     uploadFullCourseImgs();\n//   }\n// }, [uploadingData.postedCourseId]);\n// React.useEffect(() => {\n//   if (uploadingData.videoList.find((el) => el.transcodingStatus !== 'complete')) {\n//     setTimeout(() => {\n//       // console.log('flag:', checkTranscodingFlag);\n//       setCheckTranscodingFlag(true);\n//     }, 5000);\n//   }\n// }, [!checkTranscodingFlag]);\n// const testOnLoad = () => {\n//   uploadVideoFiles(uploadingData.videoList);\n// };\n// const uploadVideoFiles = async (videoArray) => {\n//   await videoArray.forEach(async (el, i) => {\n//     testUploadVimeoVids(\n//       el.video,\n//       `${el.videoName}`,\n//       `${el.videoDescription}`,\n//       dispatchUploadingVideoProcess,\n//       dispatchVideoURI,\n//       i,\n//     );\n//   });\n// };\n// const checkTranscodingVideoStatus = (videoURI) => {\n//   testCheckTranscodingVimeoVids(videoURI, setVideoTranscodingStatus);\n// };\nvar testAppendVideo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var video,dataObj;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:video=e;console.log(video.type,video.name);dataObj={isPaid:true,format:'recording',date:'',cost:0,currency:'RUB',promoCode:'',personalDiscount:0,video:video,videoName:video.name,videoDescription:video.type};_context.next=5;return vebinarsData.forEach(function(el,i){return dispatch(setMaunContentVebinarsSettings(dataObj,i));});case 5:case\"end\":return _context.stop();}}},_callee);}));return function testAppendVideo(_x){return _ref.apply(this,arguments);};}();var uploadFullCourseData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var videoList,fullCourseData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://Замена всех картинок в курсе на пустую строку (для их дальнейшей загрузки через формдату)\n//замена всех полей video на уже сформированную ссылку из UploadingCourse.videoList\nvideoList=uploadingData.videoList;fullCourseData={banner:_objectSpread(_objectSpread({},eventData.banner.data),{},{backgroundImg:''}),mainContent:_objectSpread(_objectSpread({},eventData.mainContent.data),{},{vebinars:eventData.mainContent.data.vebinars.map(function(el,i){return _objectSpread(_objectSpread({},el),{},{promoImg:'',video:videoList[i]?videoList[i].videoURL:false});})}),aboutSpeaker:_objectSpread(_objectSpread({},eventData.aboutSpeaker.data),{},{img:'',video:videoList[videoList.length-1].videoURL})};_context2.next=4;return dispatch(fetchPostEventData(fullCourseData));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function uploadFullCourseData(){return _ref2.apply(this,arguments);};}();var uploadFullCourseImgs=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var imgKeys,imgValues;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:imgKeys=Object.keys(uploadingData.courseFiles);imgValues=Object.values(uploadingData.courseFiles);console.log(imgKeys,imgValues);_context5.next=5;return imgKeys.map(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(el,i){var bodyFormData,_iterator2,_step2,value;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(el==='webinarsImg')){_context4.next=5;break;}_context4.next=3;return imgValues[i].map(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(el2,i){var bodyFormData,_iterator,_step,value;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:bodyFormData=new FormData();bodyFormData.append('webinarImg',el2.file,el2.index);_iterator=_createForOfIteratorHelper(bodyFormData.values());_context3.prev=3;_iterator.s();case 5:if((_step=_iterator.n()).done){_context3.next=11;break;}value=_step.value;_context3.next=9;return dispatch(fetchPostEventPictures(uploadingData.postedCourseId,bodyFormData));case 9:_context3.next=5;break;case 11:_context3.next=16;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](3);_iterator.e(_context3.t0);case 16:_context3.prev=16;_iterator.f();return _context3.finish(16);case 19:return _context3.abrupt(\"return\");case 20:case\"end\":return _context3.stop();}}},_callee3,null,[[3,13,16,19]]);}));return function(_x4,_x5){return _ref5.apply(this,arguments);};}());case 3:_context4.next=25;break;case 5:bodyFormData=new FormData();bodyFormData.append(\"\".concat(el),imgValues[i]);_iterator2=_createForOfIteratorHelper(bodyFormData.values());_context4.prev=8;_iterator2.s();case 10:if((_step2=_iterator2.n()).done){_context4.next=16;break;}value=_step2.value;_context4.next=14;return dispatch(fetchPostEventPictures(uploadingData.postedCourseId,bodyFormData));case 14:_context4.next=10;break;case 16:_context4.next=21;break;case 18:_context4.prev=18;_context4.t0=_context4[\"catch\"](8);_iterator2.e(_context4.t0);case 21:_context4.prev=21;_iterator2.f();return _context4.finish(21);case 24:return _context4.abrupt(\"return\");case 25:case\"end\":return _context4.stop();}}},_callee4,null,[[8,18,21,24]]);}));return function(_x2,_x3){return _ref4.apply(this,arguments);};}());case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function uploadFullCourseImgs(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-panel__title\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u042D\\u0442\\u0430 \\u043F\\u0430\\u043D\\u0435\\u043B\\u044C \\u043E\\u0442\\u043E\\u0431\\u0440\\u0430\\u0436\\u0430\\u0435\\u0442 \\u043F\\u0440\\u043E\\u0446\\u0435\\u0441\\u0441 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0412\\u0430\\u0448\\u0435\\u0433\\u043E \\u043A\\u0443\\u0440\\u0441\\u0430, \\u043F\\u043E\\u044D\\u0442\\u0430\\u043F\\u043D\\u043E\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u043D\\u0435 \\u0432\\u044B\\u043A\\u043B\\u044E\\u0447\\u0430\\u0439\\u0442\\u0435 \\u043A\\u043E\\u043C\\u043F\\u044C\\u044E\\u0442\\u0435\\u0440 \\u0438 \\u043D\\u0435 \\u0437\\u0430\\u043A\\u0440\\u044B\\u0432\\u0430\\u0439\\u0442\\u0435 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0443 \\u0434\\u043E \\u043F\\u043E\\u043B\\u043D\\u043E\\u0433\\u043E \\u0437\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043D\\u0438\\u044F \\u0432\\u0441\\u0435\\u0445 \\u043F\\u0440\\u043E\\u0446\\u0435\\u0441\\u0441\\u043E\\u0432\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-panel__content\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0430\\u0447\\u0438\\u043D\\u0430\\u044E \\u043F\\u043E\\u043B\\u0443\\u0447\\u0435\\u043D\\u0438\\u0435 \\u043A\\u043B\\u044E\\u0447\\u0435\\u0439 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u0430 \\u0438 \\u043F\\u0440\\u043E\\u0446\\u0435\\u0441\\u0441 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445...\"}),uploadingData.videoList.length&&/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-content\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"deploy-content__title\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0430\\u044E \\u0432\\u0438\\u0434\\u0435\\u043E-\\u0444\\u0430\\u0439\\u043B\\u044B \\u043D\\u0430 \\u0445\\u043E\\u0441\\u0442\\u0438\\u043D\\u0433\"}),uploadingData.videoList.map(function(el,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-content__item\",children:[/*#__PURE__*/_jsx(\"p\",{children:el.videoName}),/*#__PURE__*/_jsx(Progress,{percent:el.uploadingProcess}),el.videoURI?/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-content__item_block\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u041A\\u043B\\u044E\\u0447 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u0430 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0435\\u043D\"}),/*#__PURE__*/_jsx(CheckCircleFilled,{style:{color:'#52c41a'}})]}):el.uploadingProcess===100?/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-content__item_block\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0430\\u044E \\u043A\\u043B\\u044E\\u0447 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u0430\"}),/*#__PURE__*/_jsx(ClockCircleFilled,{style:{color:'#0080ff'}})]}):'',el.videoURL?/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-content__item_block\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u0432\\u0438\\u0434\\u0435\\u043E \\u043F\\u043E\\u043B\\u0443\\u0447\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(CheckCircleFilled,{style:{color:'#52c41a'}})]}):el.uploadingProcess===100?/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-content__item_block\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0430\\u044E \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443 \\u043D\\u0430 \\u043F\\u0435\\u0440\\u0435\\u043A\\u043E\\u0434\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(ClockCircleFilled,{style:{color:'#0080ff'}})]}):'']},i);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-panel__content\",children:[uploadingData.videoList.every(function(el){return el.videoURL;})&&/*#__PURE__*/_jsx(\"h4\",{className:\"deploy-content__title\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0430\\u044E \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043E \\u043A\\u0443\\u0440\\u0441\\u0435 \\u043D\\u0430 \\u0441\\u0435\\u0440\\u0432\\u0435\\u0440\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"deploy-content__item\",children:uploadingData.postedCourseId?/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-content__item_block\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"JSON \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u044B\"}),/*#__PURE__*/_jsx(CheckCircleFilled,{style:{color:'#52c41a'}})]}):uploadingData.videoList.every(function(el){return el.videoURL;})?/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-content__item_block\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0430\\u044E JSON \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"}),/*#__PURE__*/_jsx(ClockCircleFilled,{style:{color:'#0080ff'}})]}):''}),/*#__PURE__*/_jsx(\"div\",{className:\"deploy-content__item\",children:uploadingData.isImagesUploaded?/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-content__item_block\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0424\\u043E\\u0442\\u043E \\u043C\\u0430\\u0442\\u0435\\u0440\\u0438\\u0430\\u043B\\u044B \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u044B\"}),/*#__PURE__*/_jsx(CheckCircleFilled,{style:{color:'#52c41a'}})]}):uploadingData.postedCourseId?/*#__PURE__*/_jsxs(\"div\",{className:\"deploy-content__item_block\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0430\\u044E \\u0444\\u043E\\u0442\\u043E \\u043C\\u0430\\u0442\\u0435\\u0440\\u0438\\u0430\\u043B\\u044B\"}),/*#__PURE__*/_jsx(ClockCircleFilled,{style:{color:'#0080ff'}})]}):''})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"deploy-overlay\"})]});}export default EventDeployPanel;","map":{"version":3,"names":["React","Progress","Upload","CheckCircleFilled","ClockCircleFilled","useSelector","useDispatch","setMaunContentVebinarsSettings","setVideosFromRedactor","setVideoUploadingProcess","setVideoURI","setVideoTranscodingStatus","setVideoURL","fetchPostEventData","fetchPostEventPictures","testUploadVimeoVids","testCheckTranscodingVimeoVids","testGetVimeoVidsURL","EventDeployPanel","eventData","state","eventRedactor","vebinarsData","mainContent","data","vebinars","uploadingData","UploadingCourse","useState","videoURLFlag","setVideoURLFlag","dispatch","dispatchUploadingVideoProcess","percent","index","testAppendVideo","e","video","console","log","type","name","dataObj","isPaid","format","date","cost","currency","promoCode","personalDiscount","videoName","videoDescription","forEach","el","i","uploadFullCourseData","videoList","fullCourseData","banner","backgroundImg","map","promoImg","videoURL","aboutSpeaker","img","length","uploadFullCourseImgs","imgKeys","Object","keys","courseFiles","imgValues","values","el2","bodyFormData","FormData","append","file","value","postedCourseId","uploadingProcess","videoURI","color","every","isImagesUploaded"],"sources":["/var/www/netlear/html/clientNetlear/src/components/EventDeployPanel/EventDeployPanel.jsx"],"sourcesContent":["import React from 'react';\nimport './EventDeployPanel.scss';\n\nimport { Progress, Upload } from 'antd';\nimport { CheckCircleFilled, ClockCircleFilled } from '@ant-design/icons';\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setMaunContentVebinarsSettings } from '../../redux/actions/eventRedactor/eventRedactor';\nimport {\n  setVideosFromRedactor,\n  setVideoUploadingProcess,\n  setVideoURI,\n  setVideoTranscodingStatus,\n  setVideoURL,\n  fetchPostEventData,\n  fetchPostEventPictures,\n} from '../../redux/actions/UploadingCourse/UploadingCourse';\n\nimport {\n  testUploadVimeoVids,\n  testCheckTranscodingVimeoVids,\n  testGetVimeoVidsURL,\n} from '../../utils/testVimeo';\n\nfunction EventDeployPanel() {\n  const eventData = useSelector((state) => state.eventRedactor);\n  const vebinarsData = useSelector((state) => state.eventRedactor.mainContent.data.vebinars);\n  const uploadingData = useSelector((state) => state.UploadingCourse);\n  const [videoURLFlag, setVideoURLFlag] = React.useState(true);\n  // const [checkTranscodingFlag, setCheckTranscodingFlag] = React.useState(true);\n\n  const dispatch = useDispatch();\n\n  const dispatchUploadingVideoProcess = (percent, index) => {\n    dispatch(setVideoUploadingProcess(percent, index));\n  };\n  // const dispatchVideoURI = (uri, index) => {\n  //   dispatch(setVideoURI(uri, index));\n  // };\n\n  // const dispatchVideoTranscodingStatus = (status, index) => {\n  //   dispatch(setVideoTranscodingStatus(status, index));\n  // };\n\n  // const dispatchVideoURL = (url, index) => {\n  //   dispatch(setVideoURL(url, index));\n  // };\n\n  // React.useEffect(() => {\n  //   testOnLoad();\n  // }, []);\n\n  // React.useEffect(() => {\n  //   uploadingData.videoList.forEach((el, i) => {\n  //     if (el.videoURI && !el.videoURL && videoURLFlag) {\n  //       setVideoURLFlag(false);\n  //       testGetVimeoVidsURL(el.videoURI, dispatchVideoURL, i);\n  //     }\n  //   });\n  // }, [uploadingData.videoList, videoURLFlag]);\n\n  // React.useEffect(() => {\n  //   if (uploadingData.videoList.find((el) => !el.videoURL)) {\n  //     setTimeout(() => {\n  //       setVideoURLFlag(true);\n  //     }, 3000);\n  //   } else if (uploadingData.videoList.every((el) => el.videoURL)) {\n  //     uploadFullCourseData();\n  //   }\n  // }, [!videoURLFlag]);\n\n  // React.useEffect(() => {\n  //   if (uploadingData.postedCourseId) {\n  //     uploadFullCourseImgs();\n  //   }\n  // }, [uploadingData.postedCourseId]);\n\n  // React.useEffect(() => {\n  //   if (uploadingData.videoList.find((el) => el.transcodingStatus !== 'complete')) {\n  //     setTimeout(() => {\n  //       // console.log('flag:', checkTranscodingFlag);\n  //       setCheckTranscodingFlag(true);\n  //     }, 5000);\n  //   }\n  // }, [!checkTranscodingFlag]);\n\n  // const testOnLoad = () => {\n  //   uploadVideoFiles(uploadingData.videoList);\n  // };\n\n  // const uploadVideoFiles = async (videoArray) => {\n  //   await videoArray.forEach(async (el, i) => {\n  //     testUploadVimeoVids(\n  //       el.video,\n  //       `${el.videoName}`,\n  //       `${el.videoDescription}`,\n  //       dispatchUploadingVideoProcess,\n  //       dispatchVideoURI,\n  //       i,\n  //     );\n  //   });\n  // };\n\n  // const checkTranscodingVideoStatus = (videoURI) => {\n  //   testCheckTranscodingVimeoVids(videoURI, setVideoTranscodingStatus);\n  // };\n\n  const testAppendVideo = async (e) => {\n    const video = e;\n    console.log(video.type, video.name);\n    const dataObj = {\n      isPaid: true,\n      format: 'recording',\n      date: '',\n      cost: 0,\n      currency: 'RUB',\n      promoCode: '',\n      personalDiscount: 0,\n      video: video,\n      videoName: video.name,\n      videoDescription: video.type,\n    };\n    await vebinarsData.forEach((el, i) => dispatch(setMaunContentVebinarsSettings(dataObj, i)));\n  };\n\n  const uploadFullCourseData = async () => {\n    //Замена всех картинок в курсе на пустую строку (для их дальнейшей загрузки через формдату)\n    //замена всех полей video на уже сформированную ссылку из UploadingCourse.videoList\n    const videoList = uploadingData.videoList;\n    const fullCourseData = {\n      banner: { ...eventData.banner.data, backgroundImg: '' },\n      mainContent: {\n        ...eventData.mainContent.data,\n        vebinars: eventData.mainContent.data.vebinars.map((el, i) => {\n          return {\n            ...el,\n            promoImg: '',\n            video: videoList[i] ? videoList[i].videoURL : false,\n          };\n        }),\n      },\n      aboutSpeaker: {\n        ...eventData.aboutSpeaker.data,\n        img: '',\n        video: videoList[videoList.length - 1].videoURL,\n      },\n    };\n    await dispatch(fetchPostEventData(fullCourseData));\n  };\n\n  const uploadFullCourseImgs = async () => {\n    const imgKeys = Object.keys(uploadingData.courseFiles);\n    const imgValues = Object.values(uploadingData.courseFiles);\n    console.log(imgKeys, imgValues);\n    await imgKeys.map(async (el, i) => {\n      if (el === 'webinarsImg') {\n        await imgValues[i].map(async (el2, i) => {\n          let bodyFormData = new FormData();\n          bodyFormData.append('webinarImg', el2.file, el2.index);\n          for (var value of bodyFormData.values()) {\n            await dispatch(fetchPostEventPictures(uploadingData.postedCourseId, bodyFormData));\n          }\n          return;\n        });\n      } else {\n        let bodyFormData = new FormData();\n        bodyFormData.append(`${el}`, imgValues[i]);\n        for (var value of bodyFormData.values()) {\n          await dispatch(fetchPostEventPictures(uploadingData.postedCourseId, bodyFormData));\n        }\n        return;\n      }\n    });\n  };\n\n  return (\n    <>\n      <div className=\"deploy-panel\">\n        <div className=\"deploy-panel__title\">\n          <h2>Эта панель отображает процесс загрузки Вашего курса, поэтапно</h2>\n          <h3>\n            Пожалуйста, не выключайте компьютер и не закрывайте страницу до полного завершения всех\n            процессов\n          </h3>\n          {/* <button onClick={uploadVideoFiles}>test upload videos</button> */}\n          {/* <button onClick={checkTranscodingVideoStatus}>check transcoding video status</button> */}\n          {/* <button onClick={getVideoURL}> get video URL</button> */}\n          {/* <Upload action={testAppendVideo} listType=\"video\" maxCount={1}>\n            Видео\n          </Upload> */}\n          {/* <button\n            onClick={() =>\n              dispatch(setVideosFromRedactor(vebinarsData, eventData.aboutSpeaker.data))\n            }>\n            {' '}\n            pull vids\n          </button> */}\n          {/* <button onClick={testOnLoad}>test on load</button> */}\n          {/* <button onClick={uploadFullCourseData}> upload full course data</button> */}\n          {/* <button onClick={uploadFullCourseImgs}> upload full course imgs</button> */}\n        </div>\n        <div className=\"deploy-panel__content\">\n          <p>Начинаю получение ключей доступа и процесс загрузки данных...</p>\n          {uploadingData.videoList.length && (\n            <div className=\"deploy-content\">\n              <h4 className=\"deploy-content__title\">Загружаю видео-файлы на хостинг</h4>\n              {uploadingData.videoList.map((el, i) => {\n                return (\n                  <div className=\"deploy-content__item\" key={i}>\n                    <p>{el.videoName}</p>\n                    <Progress percent={el.uploadingProcess} />\n                    {el.videoURI ? (\n                      <div className=\"deploy-content__item_block\">\n                        <p>Ключ доступа получен</p>\n                        <CheckCircleFilled style={{ color: '#52c41a' }} />\n                      </div>\n                    ) : el.uploadingProcess === 100 ? (\n                      <div className=\"deploy-content__item_block\">\n                        <p>Получаю ключ доступа</p>\n                        <ClockCircleFilled style={{ color: '#0080ff' }} />\n                      </div>\n                    ) : (\n                      ''\n                    )}\n                    {el.videoURL ? (\n                      <div className=\"deploy-content__item_block\">\n                        <p>Ссылка на видео получена</p>\n                        <CheckCircleFilled style={{ color: '#52c41a' }} />\n                      </div>\n                    ) : el.uploadingProcess === 100 ? (\n                      <div className=\"deploy-content__item_block\">\n                        <span>Получаю ссылку на перекодирование</span>\n                        <ClockCircleFilled style={{ color: '#0080ff' }} />\n                      </div>\n                    ) : (\n                      ''\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n        <div className=\"deploy-panel__content\">\n          {uploadingData.videoList.every((el) => el.videoURL) && (\n            <h4 className=\"deploy-content__title\">Загружаю данные о курсе на сервер</h4>\n          )}\n          <div className=\"deploy-content\">\n            <div className=\"deploy-content__item\">\n              {uploadingData.postedCourseId ? (\n                <div className=\"deploy-content__item_block\">\n                  <p>JSON данные загружены</p>\n                  <CheckCircleFilled style={{ color: '#52c41a' }} />\n                </div>\n              ) : uploadingData.videoList.every((el) => el.videoURL) ? (\n                <div className=\"deploy-content__item_block\">\n                  <p>Загружаю JSON данные</p>\n                  <ClockCircleFilled style={{ color: '#0080ff' }} />\n                </div>\n              ) : (\n                ''\n              )}\n            </div>\n            <div className=\"deploy-content__item\">\n              {uploadingData.isImagesUploaded ? (\n                <div className=\"deploy-content__item_block\">\n                  <p>Фото материалы загружены</p>\n                  <CheckCircleFilled style={{ color: '#52c41a' }} />\n                </div>\n              ) : uploadingData.postedCourseId ? (\n                <div className=\"deploy-content__item_block\">\n                  <p>Загружаю фото материалы</p>\n                  <ClockCircleFilled style={{ color: '#0080ff' }} />\n                </div>\n              ) : (\n                ''\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"deploy-overlay\"></div>\n    </>\n  );\n}\n\nexport default EventDeployPanel;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}