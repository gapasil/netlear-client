{"ast":null,"code":"import _objectSpread from\"/var/www/netlear/html/clientNetlear/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/var/www/netlear/html/clientNetlear/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/var/www/netlear/html/clientNetlear/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import'./RegPage.scss';import{useHistory}from'react-router-dom';import{setLS,getLS}from'../../../utils/LocalStorage';import{Form,Input,Button,message}from'antd';import privacyPDF from'../../../assets/pdf/privacy_projectbox.pdf';import{useDispatch,useSelector}from'react-redux';import{userSignUp}from'../../../redux/actions/user';import{setSpinTrue,setSpinFalse}from'../../../redux/actions/spinner';import{fetchSignUp}from'../../../redux/actions/Auth/Auth';import Spinner from'../../../components/Spinner/Spinner';import AuthHeader from'../../../components/AuthHeader/AuthHeader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var layout={labelCol:{span:4},wrapperCol:{span:22}};var tailLayout={//   wrapperCol: {\n//     offset: 8,\n//     span: 16,\n//   },\n};function RegPage(){var history=useHistory();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.Auth;}),token=_useSelector.token;// const [userToken, setUserToken] = React.useState(getLS('EDMED_USER_TOKEN') || null);\n// const { isCompleted, errorMessage } = useSelector((state) => state.user);\n// React.useEffect(() => {\n//   if (isCompleted) {\n//     message.success('Письмо о подтверждении отправлено на указанный Email');\n//     dispatch(setSpinFalse());\n//   }\n//   if (errorMessage === 500) {\n//     message.error('Проверьте правильность электронной почты!');\n//     dispatch(setSpinFalse());\n//   }\n//   if (errorMessage === 401) {\n//     message.error('Данный Email уже зарегистрирован!');\n//     dispatch(setSpinFalse());\n//   }\n// }, [isCompleted, errorMessage]);\nReact.useEffect(function(){if(token){history.push('/');}},[token]);var onFinish=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setSpinTrue());_context.next=3;return dispatch(fetchSignUp(values));case 3:case\"end\":return _context.stop();}}},_callee);}));return function onFinish(_x){return _ref.apply(this,arguments);};}();var onFinishFailed=function onFinishFailed(errorInfo){console.log('Failed:',errorInfo);};return/*#__PURE__*/_jsxs(\"div\",{className:\"register\",children:[/*#__PURE__*/_jsx(AuthHeader,{title:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"register__form\",children:/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({},layout),{},{name:\"basic\",initialValues:{remember:true},onFinish:onFinish,onFinishFailed:onFinishFailed,children:[/*#__PURE__*/_jsx(Form.Item,{label:\"\\u0418\\u043C\\u044F\",name:\"firstName\",rules:[{required:true,message:'Пожалуйста, введите Ваше имя!'}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\",name:\"lastName\",rules:[{required:true,message:'Пожалуйста, введите фамилию!'}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Email\",name:\"email\",rules:[{required:true,message:'Пожалуйста, введите Email!'}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",name:\"password\",rules:[{required:true,message:'Пожалуйста, введите пароль!'}],children:/*#__PURE__*/_jsx(Input.Password,{})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u0443\\u044F\\u0441\\u044C, \\u0432\\u044B \\u0441\\u043E\\u0433\\u043B\\u0430\\u0448\\u0430\\u0435\\u0442\\u0435\\u0441\\u044C \\u0441 \",/*#__PURE__*/_jsx(\"a\",{href:privacyPDF,children:\"\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u0430\\u043C\\u0438 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F \\u0441\\u0430\\u0439\\u0442\\u043E\\u043C\"}),\" \\u0438 \\u0434\\u0430\\u0451\\u0442\\u0435 \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u0438\\u0435 \\u043D\\u0430 \\u043E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0443 \\u043F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u043B\\u044C\\u043D\\u044B\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445.\"]}),/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({},tailLayout),{},{children:/*#__PURE__*/_jsx(Spinner,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})})}))]}))})]});}export default RegPage;","map":{"version":3,"names":["React","useHistory","setLS","getLS","Form","Input","Button","message","privacyPDF","useDispatch","useSelector","userSignUp","setSpinTrue","setSpinFalse","fetchSignUp","Spinner","AuthHeader","layout","labelCol","span","wrapperCol","tailLayout","RegPage","history","dispatch","state","Auth","token","useEffect","push","onFinish","values","onFinishFailed","errorInfo","console","log","remember","required"],"sources":["/var/www/netlear/html/clientNetlear/src/views/AuthForms/RegPage/RegPage.jsx"],"sourcesContent":["import React from 'react';\nimport './RegPage.scss';\n\nimport { useHistory } from 'react-router-dom';\n\nimport { setLS, getLS } from '../../../utils/LocalStorage';\n\nimport { Form, Input, Button, message } from 'antd';\nimport privacyPDF from '../../../assets/pdf/privacy_projectbox.pdf';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { userSignUp } from '../../../redux/actions/user';\nimport { setSpinTrue, setSpinFalse } from '../../../redux/actions/spinner';\nimport { fetchSignUp } from '../../../redux/actions/Auth/Auth';\n\nimport Spinner from '../../../components/Spinner/Spinner';\nimport AuthHeader from '../../../components/AuthHeader/AuthHeader';\n\nconst layout = {\n  labelCol: {\n    span: 4,\n  },\n  wrapperCol: {\n    span: 22,\n  },\n};\nconst tailLayout = {\n  //   wrapperCol: {\n  //     offset: 8,\n  //     span: 16,\n  //   },\n};\n\nfunction RegPage() {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { token } = useSelector((state) => state.Auth);\n  // const [userToken, setUserToken] = React.useState(getLS('EDMED_USER_TOKEN') || null);\n  // const { isCompleted, errorMessage } = useSelector((state) => state.user);\n\n  // React.useEffect(() => {\n  //   if (isCompleted) {\n  //     message.success('Письмо о подтверждении отправлено на указанный Email');\n  //     dispatch(setSpinFalse());\n  //   }\n  //   if (errorMessage === 500) {\n  //     message.error('Проверьте правильность электронной почты!');\n  //     dispatch(setSpinFalse());\n  //   }\n  //   if (errorMessage === 401) {\n  //     message.error('Данный Email уже зарегистрирован!');\n  //     dispatch(setSpinFalse());\n  //   }\n  // }, [isCompleted, errorMessage]);\n\n  React.useEffect(() => {\n    if (token) {\n      history.push('/');\n    }\n  }, [token]);\n  \n  const onFinish = async (values) => {\n    dispatch(setSpinTrue());\n    await dispatch(fetchSignUp(values));\n  };\n\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo);\n  };\n\n  return (\n    <div className=\"register\">\n      <AuthHeader title=\"Регистрация\" />\n      <div className=\"register__form\">\n        <Form\n          {...layout}\n          name=\"basic\"\n          initialValues={{\n            remember: true,\n          }}\n          onFinish={onFinish}\n          onFinishFailed={onFinishFailed}>\n          <Form.Item\n            label=\"Имя\"\n            name=\"firstName\"\n            rules={[\n              {\n                required: true,\n                message: 'Пожалуйста, введите Ваше имя!',\n              },\n            ]}>\n            <Input />\n          </Form.Item>\n          <Form.Item\n            label=\"Фамилия\"\n            name=\"lastName\"\n            rules={[\n              {\n                required: true,\n                message: 'Пожалуйста, введите фамилию!',\n              },\n            ]}>\n            <Input />\n          </Form.Item>\n          <Form.Item\n            label=\"Email\"\n            name=\"email\"\n            rules={[\n              {\n                required: true,\n                message: 'Пожалуйста, введите Email!',\n              },\n            ]}>\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Пароль\"\n            name=\"password\"\n            rules={[\n              {\n                required: true,\n                message: 'Пожалуйста, введите пароль!',\n              },\n            ]}>\n            <Input.Password />\n          </Form.Item>\n          <p>\n            Регистрируясь, вы соглашаетесь с <a href={privacyPDF}>правилами пользования сайтом</a> и\n            даёте согласие на обработку персональных данных.\n          </p>\n          <Form.Item {...tailLayout}>\n            <Spinner>\n              <Button type=\"primary\" htmlType=\"submit\">\n                Зарегистрироваться\n              </Button>\n            </Spinner>\n          </Form.Item>\n        </Form>\n      </div>\n    </div>\n  );\n}\n\nexport default RegPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}