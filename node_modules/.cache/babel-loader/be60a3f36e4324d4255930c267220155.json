{"ast":null,"code":"import _objectSpread from\"/var/www/netlear/html/clientNetlear/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/var/www/netlear/html/clientNetlear/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import'./EditUserProfile.scss';import{Button,Select,message}from'antd';// import ruRU from 'antd/lib/locale/ru_RU';\n// import { DeleteTwoTone } from '@ant-design/icons';\nimport{useDispatch,useSelector}from'react-redux';import{setDefaultUserProfileData,fetchNewPassword,fetchNewEmail,fetchNewProfileData,fetchUploadAvatar}from'../../redux/actions/Temp/UserProfile';import EditUserProfileData from'../../components/EditUserProfileData/EditUserProfileData';import EditUserProfilePassword from'../../components/EditUserProfilePassword/EditUserProfilePassword';import EditUserProfileEmail from'../../components/EditUserProfileEmail/EditUserProfileEmail';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Option=Select.Option;function EditUserProfile(_ref){var history=_ref.history;var userData=useSelector(function(state){return state.Auth;});var tempUserData=useSelector(function(state){return state.Temp;});var _React$useState=React.useState('main'),_React$useState2=_slicedToArray(_React$useState,2),editDataType=_React$useState2[0],setEditDataType=_React$useState2[1];var ref=React.useRef();var dispatch=useDispatch();React.useEffect(function(){if(userData.authorization&&!tempUserData.picture){dispatch(setDefaultUserProfileData(userData));}},[userData.authorization]);var onSelectEditDataType=function onSelectEditDataType(e){setEditDataType(e);};var onViewUserProfile=function onViewUserProfile(){history.push('/user-profile');};var onSaveSettings=function onSaveSettings(){var passwordValues=Object.values(tempUserData.userProfilePassword);var emailValues=Object.values(tempUserData.userProfileEmail);var userDataObj=_objectSpread(_objectSpread({},tempUserData.userProfile),{},{avatar:tempUserData.avatar});console.log(userDataObj);dispatch(fetchNewProfileData(userDataObj));if(!passwordValues.includes(null&&'')){var passwordObj={oldPassword:passwordValues[0],newPassword:passwordValues[1]};passwordValues[1]===passwordValues[2]?dispatch(fetchNewPassword(passwordObj)):message.error('Проверьте совпадение новых паролей');}if(!emailValues.includes(null&&'')){var emailObj={oldEmail:emailValues[0],newEmail:emailValues[1]};emailValues[1]===emailValues[2]?dispatch(fetchNewEmail(emailObj)):message.error('Проверьте совпадение новых Email');}};return/*#__PURE__*/_jsx(\"div\",{className:\"edit-user-profile\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"edit-user-profile__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"edit-user-profile__header underline\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"edit-user-profile__left-block\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"edit-user-profile__title \",children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u043E\\u0440 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F\"}),/*#__PURE__*/_jsxs(Select,{className:\"edit-user-profile__header-button-size\",defaultValue:editDataType,onChange:onSelectEditDataType,children:[/*#__PURE__*/_jsx(Option,{value:\"main\",children:\"\\u041E\\u0441\\u043D\\u043E\\u0432\\u043D\\u044B\\u0435 \\u043D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438\"}),/*#__PURE__*/_jsx(Option,{value:\"password\",children:\"\\u0421\\u043C\\u0435\\u043D\\u0430 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F\"}),/*#__PURE__*/_jsx(Option,{value:\"email\",children:\"\\u0421\\u043C\\u0435\\u043D\\u0430 Email \"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-user-profile__button-block\",children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",disabled:tempUserData.isSaveDisabled,size:\"large\",style:{marginRight:10},className:\"edit-user-profile__header-button-size\",onClick:onSaveSettings,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"large\",className:\"edit-user-profile__header-button-size\",onClick:onViewUserProfile,children:\"\\u041F\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"})]})]}),editDataType==='main'?/*#__PURE__*/_jsx(EditUserProfileData,{}):editDataType==='password'?/*#__PURE__*/_jsx(EditUserProfilePassword,{}):/*#__PURE__*/_jsx(EditUserProfileEmail,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-user-profile__save-block\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-block__help-block\",children:[\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u0447\\u0430\\u043D\\u0438\\u0435. \\u0414\\u0440\\u0443\\u0433\\u0438\\u0435 \\u0443\\u0447\\u0430\\u0449\\u0438\\u0435\\u0441\\u044F \\u043A\\u0443\\u0440\\u0441\\u0430 \\u0432\\u0441\\u0435\\u0433\\u0434\\u0430 \\u043C\\u043E\\u0433\\u0443\\u0442 \\u0432\\u0438\\u0434\\u0435\\u0442\\u044C \\u0432\\u0430\\u0448\\u0435 \\u0438\\u043C\\u044F \\u0438 \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u044E \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F \\u0432 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u044F\\u0445 \\u0444\\u043E\\u0440\\u0443\\u043C\\u043E\\u0432 \\u0438 \\u043E\\u0446\\u0435\\u043D\\u043A\\u0430\\u0445 \\u0441\\u043E\\u043A\\u0443\\u0440\\u0441\\u043D\\u0438\\u043A\\u043E\\u0432. \\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435 \\u0432\\u0430\\u0448\\u0435\\u0433\\u043E \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F \\u0432 \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u043D\\u044B\\u0445 \\u0432\\u0430\\u043C\\u0438 \\u0440\\u0435\\u0439\\u0442\\u0438\\u043D\\u0433\\u0430\\u0445 \\u0438 \\u043E\\u0442\\u0437\\u044B\\u0432\\u0430\\u0445 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u043E \\u0432\\u0441\\u0435\\u043C, \\u043A\\u0442\\u043E \\u043F\\u0440\\u043E\\u0441\\u043C\\u0430\\u0442\\u0440\\u0438\\u0432\\u0430\\u0435\\u0442 \\u043A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433 Edmed. \\u0414\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435 \\u0441\\u0432\\u0435\\u0434\\u0435\\u043D\\u0438\\u044F \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B \\u0432 \\u0434\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0435 \",/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\"\\u041F\\u043E\\u043B\\u0438\\u0442\\u0438\\u043A\\u0430 \\u043A\\u043E\\u043D\\u0444\\u0438\\u0434\\u0435\\u043D\\u0446\\u0438\\u0430\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438\"}),\".\"]}),/*#__PURE__*/_jsx(Button,{type:\"primary\",disabled:tempUserData.isSaveDisabled,size:\"large\",style:{marginTop:15},onClick:onSaveSettings,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F\"})]})]})});}export default EditUserProfile;","map":{"version":3,"names":["React","Button","Select","message","useDispatch","useSelector","setDefaultUserProfileData","fetchNewPassword","fetchNewEmail","fetchNewProfileData","fetchUploadAvatar","EditUserProfileData","EditUserProfilePassword","EditUserProfileEmail","Option","EditUserProfile","history","userData","state","Auth","tempUserData","Temp","useState","editDataType","setEditDataType","ref","useRef","dispatch","useEffect","authorization","picture","onSelectEditDataType","e","onViewUserProfile","push","onSaveSettings","passwordValues","Object","values","userProfilePassword","emailValues","userProfileEmail","userDataObj","userProfile","avatar","console","log","includes","passwordObj","oldPassword","newPassword","error","emailObj","oldEmail","newEmail","isSaveDisabled","marginRight","marginTop"],"sources":["/var/www/netlear/html/clientNetlear/src/views/EditUserProfile/EditUserProfile.jsx"],"sourcesContent":["import React from 'react';\nimport './EditUserProfile.scss';\n\nimport { Button, Select, message } from 'antd';\n\n// import ruRU from 'antd/lib/locale/ru_RU';\n// import { DeleteTwoTone } from '@ant-design/icons';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  setDefaultUserProfileData,\n  fetchNewPassword,\n  fetchNewEmail,\n  fetchNewProfileData,\n  fetchUploadAvatar,\n} from '../../redux/actions/Temp/UserProfile';\n\nimport EditUserProfileData from '../../components/EditUserProfileData/EditUserProfileData';\nimport EditUserProfilePassword from '../../components/EditUserProfilePassword/EditUserProfilePassword';\nimport EditUserProfileEmail from '../../components/EditUserProfileEmail/EditUserProfileEmail';\n\nconst { Option } = Select;\n\nfunction EditUserProfile({ history }) {\n  const userData = useSelector((state) => state.Auth);\n  const tempUserData = useSelector((state) => state.Temp);\n  const [editDataType, setEditDataType] = React.useState('main');\n\n  const ref = React.useRef();\n  const dispatch = useDispatch();\n\n  React.useEffect(() => {\n    if (userData.authorization && !tempUserData.picture) {\n      dispatch(setDefaultUserProfileData(userData));\n    }\n  }, [userData.authorization]);\n\n  const onSelectEditDataType = (e) => {\n    setEditDataType(e);\n  };\n\n  const onViewUserProfile = () => {\n    history.push('/user-profile');\n  };\n\n  const onSaveSettings = () => {\n    const passwordValues = Object.values(tempUserData.userProfilePassword);\n    const emailValues = Object.values(tempUserData.userProfileEmail);\n    const userDataObj = {\n      ...tempUserData.userProfile,\n      avatar: tempUserData.avatar,\n    };\n    console.log(userDataObj);\n    dispatch(fetchNewProfileData(userDataObj));\n\n    if (!passwordValues.includes(null && '')) {\n      const passwordObj = { oldPassword: passwordValues[0], newPassword: passwordValues[1] };\n\n      passwordValues[1] === passwordValues[2]\n        ? dispatch(fetchNewPassword(passwordObj))\n        : message.error('Проверьте совпадение новых паролей');\n    }\n    if (!emailValues.includes(null && '')) {\n      const emailObj = { oldEmail: emailValues[0], newEmail: emailValues[1] };\n      emailValues[1] === emailValues[2]\n        ? dispatch(fetchNewEmail(emailObj))\n        : message.error('Проверьте совпадение новых Email');\n    }\n  };\n\n  return (\n    <div className=\"edit-user-profile\">\n      <div className=\"edit-user-profile__container\">\n        <div className=\"edit-user-profile__header underline\">\n          <div className=\"edit-user-profile__left-block\">\n            <h2 className=\"edit-user-profile__title \">Редактор профиля</h2>\n            <Select\n              className=\"edit-user-profile__header-button-size\"\n              defaultValue={editDataType}\n              onChange={onSelectEditDataType}>\n              <Option value=\"main\">Основные настройки</Option>\n              <Option value=\"password\">Смена пароля</Option>\n              <Option value=\"email\">Смена Email </Option>\n            </Select>\n          </div>\n\n          <div className=\"edit-user-profile__button-block\">\n            <Button\n              type=\"primary\"\n              disabled={tempUserData.isSaveDisabled}\n              size=\"large\"\n              style={{ marginRight: 10 }}\n              className=\"edit-user-profile__header-button-size\"\n              onClick={onSaveSettings}>\n              Сохранить изменения\n            </Button>\n            <Button\n              type=\"primary\"\n              size=\"large\"\n              className=\"edit-user-profile__header-button-size\"\n              onClick={onViewUserProfile}>\n              Посмотреть профиль\n            </Button>\n          </div>\n        </div>\n        {editDataType === 'main' ? (\n          <EditUserProfileData  />\n        ) : editDataType === 'password' ? (\n          <EditUserProfilePassword  />\n        ) : (\n          <EditUserProfileEmail />\n        )}\n        <div className=\"edit-user-profile__save-block\">\n          <div className=\"input-block__help-block\">\n            Примечание. Другие учащиеся курса всегда могут видеть ваше имя и фотографию профиля в\n            сообщениях форумов и оценках сокурсников. Изображение вашего профиля в отправленных вами\n            рейтингах и отзывах доступно всем, кто просматривает каталог Edmed. Дополнительные\n            сведения доступны в документе <a href=\"#\">Политика конфиденциальности</a>.\n          </div>\n          <Button\n            type=\"primary\"\n            disabled={tempUserData.isSaveDisabled}\n            size=\"large\"\n            style={{ marginTop: 15 }}\n            onClick={onSaveSettings}>\n            Сохранить изменения\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default EditUserProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}